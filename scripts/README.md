# Notion Sync Scripts

Automated scripts to sync documentation from this repository to your Notion workspace.

## Setup Complete âœ…

Your Notion integration is configured and ready to use!

- **Integration Name**: BlackBox CLI
- **Workspace**: Esteban Ibarra's Notion
- **API Key**: Stored in `.env.notion` (not committed to git)

## ðŸ“Š Workspace Structure

Your Notion workspace is organized as follows:

```
ðŸš€ First Responder Connect (Main Page)
â”œâ”€â”€ ðŸ“– README & Overview
â”‚   â””â”€â”€ README.md
â”œâ”€â”€ ðŸ“‹ Setup & Configuration
â”‚   â”œâ”€â”€ SETUP_SUMMARY.md
â”‚   â”œâ”€â”€ QUICK_REFERENCE.md
â”‚   â””â”€â”€ GITHUB_SECRETS_SETUP.md
â”œâ”€â”€ ðŸ—ï¸ Architecture & Design
â”‚   â”œâ”€â”€ ARCHITECTURE.md
â”‚   â”œâ”€â”€ PRD.md
â”‚   â””â”€â”€ API_DOCUMENTATION.md
â”œâ”€â”€ ðŸš€ CI/CD & Deployment
â”‚   â”œâ”€â”€ CI_CD_SETUP.md
â”‚   â”œâ”€â”€ CI_CD_QUICK_START.md
â”‚   â”œâ”€â”€ CI_CD_COMPLETE_GUIDE.md
â”‚   â”œâ”€â”€ CI_CD_SETUP_SUMMARY.md
â”‚   â”œâ”€â”€ CI_CD_VISUAL_OVERVIEW.md
â”‚   â””â”€â”€ DEPLOYMENT_GUIDE.md
â”œâ”€â”€ ðŸ“š Implementation
â”‚   â”œâ”€â”€ IMPLEMENTATION_GUIDE.md
â”‚   â”œâ”€â”€ ROADMAP.md
â”‚   â””â”€â”€ QA_STRATEGY.md
â””â”€â”€ ðŸ“ Changelog
    â””â”€â”€ CHANGELOG.md
```

**Total:** 17 documentation files organized into 6 categories

## Available Scripts

### 1. Test Notion Connection
```bash
node scripts/test-notion-api.js
```
Tests your Notion API connection and lists all accessible pages.

### 2. Find Notion Pages
```bash
node scripts/find-notion-pages.js
```
Searches for pages in your Notion workspace to help you find page IDs.

### 3. Create Workspace Structure
```bash
node scripts/create-notion-workspace.js
```
Automatically creates the hierarchical workspace structure in Notion with category pages and proper organization.

**What it does:**
- Creates 6 category pages under the main page
- Adds emoji icons to each category
- Generates `notion-page-mapping.json` with file-to-page mappings
- Checks for existing pages to avoid duplicates

### 4. Sync Documentation to Notion

#### Sync All Files
```bash
node scripts/sync-to-notion.js
```
Syncs all 17 documentation files to their respective Notion pages.

#### Sync Specific File
```bash
node scripts/sync-to-notion.js README.md
node scripts/sync-to-notion.js docs/ARCHITECTURE.md
```
Syncs a single documentation file to Notion.

#### Easy Sync (Bash Script)
```bash
bash scripts/sync-all-docs.sh
```
Or make it executable and run:
```bash
chmod +x scripts/sync-all-docs.sh
./scripts/sync-all-docs.sh
```

This script:
- Checks for required files
- Creates workspace structure if needed
- Syncs all documentation
- Shows a nice progress output

## Quick Start Guide

### First Time Setup

1. **Verify API Connection**
   ```bash
   node scripts/test-notion-api.js
   ```

2. **Create Workspace Structure**
   ```bash
   node scripts/create-notion-workspace.js
   ```

3. **Sync All Documentation**
   ```bash
   bash scripts/sync-all-docs.sh
   ```

4. **View in Notion**
   Open: https://www.notion.so/First-Responder-Connectwha-2f1717e8cf8481738d3febbde3c057bd

### Regular Updates

When you update documentation files, simply run:
```bash
bash scripts/sync-all-docs.sh
```

Or sync specific files:
```bash
node scripts/sync-to-notion.js docs/ROADMAP.md
```

## File Mapping

The `notion-page-mapping.json` file contains the mapping between documentation files and Notion pages:

```json
{
  "README.md": {
    "pageId": "2f2717e8-cf84-812d-a5ff-ce86bcf23618",
    "categoryName": "ðŸ“– README & Overview",
    "docName": "README"
  },
  "docs/ARCHITECTURE.md": {
    "pageId": "2f2717e8-cf84-81cc-8b78-c72b2de9ee86",
    "categoryName": "ðŸ—ï¸ Architecture & Design",
    "docName": "ARCHITECTURE"
  }
  // ... more mappings
}
```

This file is automatically generated by `create-notion-workspace.js`.

## Features

### Markdown to Notion Conversion

The sync script converts markdown to Notion blocks:

- âœ… **Headings** (H1, H2, H3)
- âœ… **Code blocks** with syntax highlighting
- âœ… **Bullet lists**
- âœ… **Numbered lists**
- âœ… **Paragraphs**
- âœ… **Large code blocks** (automatically split if > 2000 chars)

### Smart Syncing

- **Incremental updates**: Only syncs changed files when specified
- **Rate limiting**: Includes delays to avoid API rate limits
- **Error handling**: Continues syncing even if one file fails
- **Progress tracking**: Shows detailed progress for each file

## Troubleshooting

### No pages found
- Make sure you've shared the page with "BlackBox CLI" integration
- In Notion: Page â†’ "..." â†’ "Connections" â†’ Add "BlackBox CLI"

### Sync errors
- Check that page IDs are correct in `notion-page-mapping.json`
- Ensure the integration has access to the pages
- Run `node scripts/test-notion-api.js` to verify connection

### API key issues
- Verify `.env.notion` exists and contains your API key
- Get a new key at: https://www.notion.so/my-integrations

### Workspace structure not found
- Run `node scripts/create-notion-workspace.js` to create it
- Or use `bash scripts/sync-all-docs.sh` which creates it automatically

### Code block too large errors
The script now automatically splits code blocks larger than 2000 characters into multiple blocks with continuation markers.

## Adding New Documentation Files

To add new documentation files to the sync:

1. **Update `create-notion-workspace.js`**
   
   Add your file to the appropriate category in `WORKSPACE_STRUCTURE`:
   ```javascript
   'ðŸ“‹ Setup & Configuration': {
     icon: 'ðŸ“‹',
     docs: [
       'docs/SETUP_SUMMARY.md',
       'docs/NEW_FILE.md',  // Add here
     ]
   }
   ```

2. **Recreate Workspace Structure**
   ```bash
   node scripts/create-notion-workspace.js
   ```

3. **Sync the New File**
   ```bash
   node scripts/sync-to-notion.js docs/NEW_FILE.md
   ```

## Security

- `.env.notion` is in `.gitignore` and will NOT be committed
- Never share your Notion API key publicly
- The API key only has access to pages you explicitly share with the integration

## Links

- [Notion Integrations](https://www.notion.so/my-integrations)
- [Notion API Docs](https://developers.notion.com/)
- [First Responder Connect Page](https://www.notion.so/First-Responder-Connectwha-2f1717e8cf8481738d3febbde3c057bd)

## Script Files

| Script | Purpose |
|--------|---------|
| `test-notion-api.js` | Test API connection and list accessible pages |
| `find-notion-pages.js` | Search for pages in your workspace |
| `create-notion-workspace.js` | Create hierarchical workspace structure |
| `sync-to-notion.js` | Sync markdown files to Notion pages |
| `sync-all-docs.sh` | Convenient bash script for full sync |
| `notion-page-mapping.json` | Generated file mapping docs to pages |

## Tips

1. **Regular Syncing**: Set up a git hook to auto-sync on push
2. **Selective Syncing**: Use specific file sync for quick updates
3. **Backup**: Keep your markdown files as source of truth
4. **Collaboration**: Share Notion pages with team members
5. **Organization**: Use the category structure to keep docs organized

---

**Last Updated:** January 24, 2026  
**Status:** âœ… Fully Operational - All 17 files synced successfully
